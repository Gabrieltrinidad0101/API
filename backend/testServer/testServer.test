import express from 'express'
import type http from 'http'
import { type Message } from 'whatsapp-web.js'
const app = express()

export default class TestServer {
  private server: http.Server | null = null
  start () {
    this.server = app.listen(8080)
  }

  listenMessega (callBack: (message: Message) => void) {
    app.get('/messega', (req) => {
      callBack(req.body as Message)
    })
  }

  end = (): void => {
    this.server?.close()
  }
}
